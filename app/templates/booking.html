{% extends "base.html" %}
{% block content %}

<!-- PAGE TITLE -->
<div class="text-center my-4" data-animate>
    <h1 class="display-5 fw-bold text-dark">Book Your Appointment</h1>
    <p class="lead text-muted">We’re excited to glam you up for your special day</p>
</div>

<!-- BOOKING FORM -->
<section class="my-5">
    <div class="booking-container shadow p-4 rounded" data-animate>

        <form id="bookingForm">

            <!-- Name -->
            <div class="mb-3">
                <label class="form-label fw-bold">Full Name</label>
                <input type="text" name="name" class="form-control" placeholder="Enter your name" required>
            </div>

            <!-- Phone -->
            <div class="mb-3">
                <label class="form-label fw-bold">Phone Number</label>
                <input type="tel" name="phone" class="form-control" placeholder="Enter your phone number" required>
            </div>

            <!-- Service -->
            <div class="mb-3">
                <label class="form-label fw-bold">Select Service</label>
                <select name="service" class="form-select" required>
                    <option value="">Choose a service</option>
                    <option>Bridal Makeup</option>
                    <option>Bridal Hairstyling</option>
                    <option>Party Makeup</option>
                    <option>Saree Draping</option>
                    <option>Mehandi</option>
                    <option>Full Bridal Package</option>
                </select>
            </div>

            <!-- Date -->
            <div class="mb-3">
                <label class="form-label fw-bold">Preferred Date</label>
                <input type="date" name="date" class="form-control" required>
            </div>

            <!-- Time -->
            <div class="mb-3">
                <label class="form-label fw-bold">Preferred Time</label>
                <input type="time" name="time" class="form-control" required>
            </div>

            <!-- Notes -->
            <div class="mb-3">
                <label class="form-label fw-bold">Additional Notes</label>
                <textarea name="message" class="form-control" rows="4" placeholder="Any special requests?"></textarea>
            </div>

            <!-- Submit -->
            <div class="text-center mt-4">
                <button type="submit" class="btn btn-dark btn-lg px-5">
                    Confirm Booking
                </button>
            </div>

        </form>

    </div>
</section>

<!-- ✅ SUCCESS POPUP -->
<div id="successPopup"
     style="display:none; position:fixed; top:0; left:0; width:100%; height:100%;
            background:rgba(0,0,0,0.6); justify-content:center; align-items:center;
            z-index:2000; color:white; font-size:24px; font-weight:bold;">
    Booking Confirmed ✅
</div>

<!-- ✅ BOOKING FORM SCRIPT -->
<script>
document.addEventListener("DOMContentLoaded", function () {

    const form = document.getElementById("bookingForm");
    const popup = document.getElementById("successPopup");

    form.addEventListener("submit", function(e) {
        e.preventDefault();

        // ✅ Show popup
        popup.style.display = "flex";

        // ✅ Collect form values
        let name = document.querySelector("input[name='name']").value;
        let phone = document.querySelector("input[name='phone']").value;
        let service = document.querySelector("select[name='service']").value;
        let date = document.querySelector("input[name='date']").value;
        let time = document.querySelector("input[name='time']").value;
        let message = document.querySelector("textarea[name='message']").value;

        // ✅ WhatsApp number
        let whatsappNumber = "918870685588";

        // ✅ Build WhatsApp message
        let whatsappURL =
            "https://api.whatsapp.com/send?phone=" + whatsappNumber +
            "&text=" + encodeURIComponent(
                "New Booking Request:\n" +
                "-------------------------\n" +
                "Name: " + name + "\n" +
                "Phone: " + phone + "\n" +
                "Service: " + service + "\n" +
                "Date: " + date + "\n" +
                "Time: " + time + "\n" +
                "Notes: " + message
            );

        // ✅ Open WhatsApp
        window.open(whatsappURL, "_blank");

        // ✅ Reset form
        form.reset();

        // ✅ Hide popup after 3 seconds
        setTimeout(() => {
            popup.style.display = "none";
        }, 3000);
    });

});
</script>

{% endblock %}